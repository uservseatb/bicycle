/**
 * Compressed by https://jscompress.com/
 */
;var bicycle=function(){var a=function(){var a=$({});this.subscribe=function(b){a.bind(b.name,b.handler)},this.unsubscribe=function(b){a.unbind(b.name)},this.throwEvent=function(b){setTimeout(function(){a.trigger(b.name,[b.args])},0)}},b=function(a,b){this.name=a,this.args=b},c=function(a,b){this.name=a,this.handler=b};document.eventBus=new a;var d=document.eventBus,e={};$.extend(e,{_APP:{_START:"21c90023-52bd-4179-b07c-cf99fc90eda7",_Loaded:"ac7d1eb9-dede-4203-93e5-b0a868a3d193"},_VIEW:{_ATTACH:".view.attach.event",_ATTACHED:".view.attached.event",_DETACH:".view.detach.event",_BEFORE_DETACHED:".view.before.detached.event",_DETACHED:".view.detached.event",_SET_HANDLERS:".view.set.handlers.event"}});var f=!1,g=function(){var a={};this.put=function(b){a[b]?a[b]+=1:a[b]=1},this.drop=function(b){a[b]&&(a[b]=void 0,delete a[b])},this.check=function(b,c){!a[b]&&f&&(console.warn("there is no subscribers for event ["+b+"] in global event bus, please add subscribers to take some effect"),console.warn("passed args:"),console.warn(c),console.warn("---------------------------------------------------------------------------------------------------------------------------------------"))}},h=new g,i=function(){var a=this;this.on=function(a,b){var d=new c(a,b);i(d),h.put(a)},this.once=function(b,c){var d=function(d,e){a.off(b),c(d,e)};a.on(b,d)},this.many=function(b,c){$.each(b,function(){a.on(""+this,c)})},this.off=function(a){d.unsubscribe(new c(a)),h.drop(a)};var b=function(a){var c,b=a;this.model=function(a){return c=a,this},this.attach=function(){bc.trigger(b+e._VIEW._ATTACH,{model:c})},this.attachToContainer=function(a){bc.trigger(b+e._VIEW._ATTACH,{model:c,container:a})},this.detach=function(){bc.trigger(b+e._VIEW._DETACH)},this.setHandlers=function(a){bc.trigger(b+e._VIEW._SET_HANDLERS,{eventHandlers:a})}};this.view=function(a){return new b(a)},this.renderView=function(a,b,c,d,e){var h=d||function(){};if($(a)&&$(a).length>0){var i=k.processTemplate(b,c);$(a).append(i.template),e=e||{};var j=g(e,i.viewElementSelectors,i.viewElementFunctions,i.viewElementOnFunctions);f&&(console.log("EVENT BINDER`s call: ---------------------------------------"),console.log(b),console.log(e),console.log(c),console.log("------------------------------------------------------------")),h(e,c),j.size>0&&g(e,void 0,j.postBinding)}else console.error("container: '"+a+"' is not exist")};var g=function(a,b,c,d){var g,e={},f=0;for(g in b)if(b.hasOwnProperty(g)){var h=$(b[g]);h&&(a[g]=$(b[g]))}for(g in c)if(c.hasOwnProperty(g)){var i=a[g];i?$.each(c[g],function(b){var d=$(c[g][b]);d.length>0&&d.on("click",a[g])}):(f++,e[g]=c[g])}for(g in d)if(d.hasOwnProperty(g)){var j=d[g],k=bc.fetchFunction(g);$.each(j,function(a){var b=j[a];void 0!==b.ONRENDER&&k($(b.ONRENDER))})}return{postBinding:e,size:f}};this.detachView=function(a,b){var c=$(a);if(c&&c.length>0){var d=c.find(b);d.length>0&&(d.off(),d.remove())}};var i=function(a){d.subscribe(a)};return this},j=function(a){var c,b=this,d={},f={},g=function(){b.on(a,h)},h=function(a,b){c=b.templateUrls,f=b.functions;var g=0,h=0;$.each(c,function(a){h++;var b=c[a];$.ajax({url:b,success:function(a){d[b]=doT.template(i(a)),g++,h==g&&bc.trigger(e._APP._Loaded)}})})},i=function(a){return a.replace(/\<\!\-\-.*?\-\-\>/gi,"")},j=function(a){function j(a){var b=a.substr("bc-".length),c=b.indexOf('="'),d=b.substr(c+2,b.length-c-3).split(" ");return{onMethod:b.substr(0,c),selector:d[0],functionName:d[1]}}var b=a.match(/bc\-jq\-container\=\".*?\"/gi),c=a.match(/bc\-jq-el=\".*?\"/gi),d=a.match(/bc\-jq\-click=\".*?\"/gi),e=a.match(/bc\-on.*?=\".*?\"/gi),f={},g={},h={};if(null!=b&&b.length>0){var i=b[0].substr(0,b[0].length-1).replace(/bc\-jq\-container\=\"/,"")+" ";null!=c&&$.each(c,function(a){var b=c[a].substr(0,c[a].length-1).replace(/bc\-jq-el=\"/,"").split(" ");f[b[1]]?console.error("you cant define equal element ids ["+b[1]+"]"):f[b[1]]=i+b[0]}),null!=d&&$.each(d,function(a){var b=d[a].substr(0,d[a].length-1).replace(/bc\-jq-click=\"/,"").replace(/\(\)/,"").split(" ");g[b[1]]?g[b[1]].push(i+b[0]):g[b[1]]=[i+b[0]]}),null!=e&&$.each(e,function(a){var b=e[a],c=j(b),d=c.onMethod.replace(/[-,_]/gi,"").toUpperCase(),f={};f[d]=i+c.selector,h[c.functionName]?h[c.functionName].push(f):h[c.functionName]=[f]})}var k=a.replace(/bc\-jq\-container\=\".*?\"/gi,"").replace(/bc\-jq-el=\".*?\"/gi,"").replace(/bc\-jq\-click=\".*?\"/gi,"").replace(/bc\-on.*?=\".*?\"/gi,"");return{viewElementSelectors:f,viewElementFunctions:g,viewElementOnFunctions:h,template:k}},k=function(a,b){var g,c=function(a,b){function c(a){function b(){return 0==a.indexOf("<bc ")}function c(){return/\>(.*?)\</gi.exec(a)[1]}function d(){var b=/bc[\s,\-](\w*)=\"([\w,\-]{1,})\"/gi.exec(a);return{name:b[1],value:b[2]}}var e=d(),g=c();if(e&&"apply"===e.name&&f[e.value]){var h=f[e.value](g);return b()?h:a}return a}return a.replace(b,c(b))},d=function(a){return a.match(/(\<bc\s.*?\<\/bc\>)/gi)||[]},e=function(a){return a.match(/(\<\w{1,30}\sbc\-.*?\<\/\w{1,30}\>)/gi)||[]},h=[];for(h=h.concat(d(a)),h=h.concat(e(a)),g=0;g<h.length;g++){var i=h[g];a=c(a,i)}return a};return this.processTemplate=function(a,b){var c=d[a],e=c(b),f=j(e);return f.template=k(f.template,b),f},g(),this};j.prototype=new i,j.prototype.constructor=j,document.templateProcessor=new j(e._APP._START);var k=document.templateProcessor,l=function(){var a=[],c={},g="";this.setWindowLocationHref=function(a){window.location.href=g+a},this.sendAjax=function(a){a.url=g+a.url,$.ajax(a)},this.setApiUrl=function(a){g=a},this.run=function(f){$.each(a,function(){l(this)}),f.templateUrls?d.throwEvent(new b(e._APP._START,{templateUrls:f.templateUrls,functions:c})):(console.info("template urls is not defined"),d.throwEvent(new b(e._APP._Loaded,{})))},this.createFunction=function(a,b){return b instanceof Function?void(""!==a?c[a]=b:console.error("name of function can not be empty")):void console.error("the function "+a+" is not a function")},this.fetchFunction=function(a){var b;return""===a&&console.error("name of function can not be empty"),b=c[a.replace(/[\(,\)]/gi,"")],void 0==b&&console.error("function "+a+" is not found"),b},this.createComponent=function(b,c){return b||console.error("name of component is required"),c instanceof Function?(c.prototype=new i,c.prototype.constructor=c,k(c,b),void a.push(c)):void console.error("component "+b+" is not a function. Please pass neme of the component before")},this.showDebug=function(a){f=a};var j=function(a){var c,d,f,g,h,b=this,i=function(){b.on(a+e._VIEW._ATTACH,function(c,d){d.container?b.attachToContainer(d.container,d.model):b.attach(d.model),bc.trigger(a+e._VIEW._ATTACHED,{model:d.model,viewScope:g},!1)}),b.on(a+e._VIEW._DETACH,function(){bc.trigger(a+e._VIEW._BEFORE_DETACHED,{},!1),b.detach(),bc.trigger(a+e._VIEW._DETACHED,{},!1)}),b.on(a+e._VIEW._SET_HANDLERS,function(a,b){g=b.eventHandlers})};return this.attach=function(a){b.detachView(h,"#"+c),b.renderView(h,d,a,f,g)},this.attachToContainer=function(a,e){a||(a="body",console.info("container is not defined, the view will attach to document body!")),b.detachView(a," #"+c),b.renderView(a,d,e,f,g)},this.detach=function(){b.detachView(h,"#"+c)},this.viewElementId=function(a){return c=a,this},this.template=function(a){return d=a,this},this.initView=function(a){return f=a,this},this.eventHandlers=function(a){return g=a,this},this.container=function(a){return h=a,this},i(),this};j.prototype=new i,j.prototype.constructor=j,this.createView=function(a){return a||console.error("view name should be defined"),new j(a)},this.clone=function(a){return a?JSON.parse(JSON.stringify(a)):null},this.trigger=function(a,c,e){c=c||{},d.throwEvent(new b(a,c)),void 0!=e&&1!=e||h.check(a,c)};var k=function(a,b){a.prototype.getName=function(){return b}},l=function(a){var b=new a;b.init?b.init(b):console.error("method init is not defined in "+b.getName())}};return l.prototype.Events=e,new l}();
